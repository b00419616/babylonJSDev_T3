import{S as P,e as T,f as E,V as i,A as I,H as S,C as h,D as R,M as v,a as k,g as p,h as y,b as C,T as w,d as B,E as z}from"./nativeXRFrame-DOeo_lEL.js";import"./ExtrasAsMetadata-C3T-U7sb.js";/* empty css              */function _(t){const e=new I("camera1",5*Math.PI/4,Math.PI/4,50,new i(0,5,0),t);return e.attachControl(!0),e.lowerBetaLimit=.1,e.upperBetaLimit=Math.PI/2.2,e.lowerRadiusLimit=15,e.upperRadiusLimit=100,e}function O(t,e,n,o){const a=new C(e,o);a.diffuseTexture=new w(n,o),t.material=a}function D(t){const e=new S("ambientLight",new i(0,1,0),t);e.intensity=.1,e.diffuse=new h(.6,.7,1),e.groundColor=new h(.2,.2,.3);const n=new R("light",new i(1,-2,1),t);return n.position=new i(-10,100,-10),n.intensity=.7,n.diffuse=new h(.6,.7,1),n.specular=new h(.8,.9,1),n}function G(t,e){const n=new k(2048,e);n.useBlurExponentialShadowMap=!0,n.blurKernel=16,t.meshes.forEach(a=>{a.name.includes("rockCluster")&&n.addShadowCaster(a)});const o=t.getMeshByName("ground");o&&(o.receiveShadows=!0)}function K(t){const e=v.CreateGround("ground",{width:128,height:128,subdivisions:128},t);return O(e,"moonMat","textures/moon.jpg",t),e}function b(t){let e=v.CreateCylinder("coin",{diameter:2,height:.08},t);const n=new C("coinMat",t);n.diffuseColor=new h(1,1,0),e.material=n,e.rotation.x=Math.PI/2;const o=(Math.random()-.5)*50,a=(Math.random()-.5)*50;return e.position=new i(o,5,a),e}function N(t){const e=[1,2,3,4,8],n=e[Math.floor(Math.random()*e.length)];let o=v.CreatePolyhedron("spacerock",{type:n,size:1.5},t);o.position=new i(0,0,0);const a=new C("rockMat",t);return a.diffuseTexture=new w("./textures/spacedebris.png",t),a.bumpTexture=new w("./textures/spacedebris_n.png",t),a.bumpTexture.level=1.25,console.log("Bump Level is:  ",a.bumpTexture.level),o.material=a,o.setEnabled(!1),o}function H(t,e,n){const o=N(t);o.setEnabled(!1);const a=[];for(let r=0;r<e;r++){const c=o.clone(`rockClone_${r}`);c&&(c.setEnabled(!0),c.position=n.add(new i((Math.random()-.5)*10,(Math.random()-.5)*5,(Math.random()-.5)*10)),c.scaling=new i(.3+Math.random()*.4,.3+Math.random()*.4,.3+Math.random()*.4),c.rotation=new i(Math.random()*Math.PI,Math.random()*Math.PI,Math.random()*Math.PI),a.push(c))}const s=B.MergeMeshes(a,!0,!0,void 0,!1,!0);if(s){s.name="rockCluster";const r=.3+Math.random()*.5,c=.2+Math.random()*.2,u=s.position.y,f=Math.random()*Math.PI*2;return t.registerBeforeRender(()=>{const m=performance.now()*.001;s.position.y=u+Math.sin(m*c+f)*r}),s}else return console.warn("Failed to merge rock cluster."),o}function V(t,e,n){for(let o=0;o<e;o++){const a=(Math.random()-.5)*n,s=(Math.random()-.5)*n,r=2+Math.random()*3;H(t,5+Math.floor(Math.random()*6),new i(a,r,s))}}function j(t,e){t.actionManager=new p(t),t.actionManager.registerAction(new y(p.OnKeyDownTrigger,n=>{e[n.sourceEvent.key.toLowerCase()]=!0})),t.actionManager.registerAction(new y(p.OnKeyUpTrigger,n=>{e[n.sourceEvent.key.toLowerCase()]=!1}))}function F(t,e,n,o){let s=0,r=0;if(e.w&&(r+=1),e.s&&(r-=1),e.a&&(s-=1),e.d&&(s+=1),s!==0||r!==0){const u=new i(s,0,r).normalize();t.rotation.y=Math.atan2(u.x,u.z);const f=new i(Math.sin(t.rotation.y),0,Math.cos(t.rotation.y));t.position.addInPlace(f.scale(.4)),o!=null&&o.isPlaying||(n==null||n.stop(),o==null||o.start(!0))}else o!=null&&o.isPlaying&&(o.stop(),n==null||n.start(!0))}function U(t){const e=new P(t),n=_(e),o=D(e),a=K(e);G(e,o);const s={};T.ImportMesh("","models/","alien.glb",e,(c,u,f,m)=>{const l=new E("playerRoot",e);c.forEach(d=>d.parent=l),l.scaling=new i(.05,.05,.05),l.rotation=new i(Math.PI/2,0,0);const M=m.find(d=>d.name.toLowerCase().includes("idle")),x=m.find(d=>d.name.toLowerCase().includes("walk"));M==null||M.start(!0),j(e,s),e.onBeforeRenderObservable.add(()=>{F(l,s,M,x),r.rotation.z+=.07,r&&l&&l.getChildMeshes().some(d=>d.intersectsMesh(r,!1))&&(r.dispose(),console.log("Coin collected!"),r=b(e))})}),V(e,20,128);let r=b(e);return{scene:e,camera:n,light:o,ground:a}}const X="renderCanvas";console.log("Running index.ts from element03");let g=document.createElement("canvas");g.id=X;g.classList.add("background-canvas");document.body.appendChild(g);let L=new z(g,!0,{},!0),Y=U(L);L.runRenderLoop(()=>{Y.scene.render()});
