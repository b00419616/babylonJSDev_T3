import{S as E,M as w,V as i,D as O,C as g,A as I,a as G,b as x,T as M,c as A,H as z,d as N,e as Y,f as X,g as T,h as $,E as v,i as K}from"./nativeXRFrame-DOeo_lEL.js";import"./ExtrasAsMetadata-C3T-U7sb.js";import{A as Z,I as Q,C as j,B as ee}from"./mrdlInnerquadMaterial-Dww3fJ86.js";/* empty css              */function P(t,e,n,o){const a=new x(e,o);a.diffuseTexture=new M(n,o),t.material=a}function te(t){let e=w.CreateBox("box",{size:1},t);return e.scaling=new i(2,2,2),e.position=new i(3,1,0),P(e,"moonMat","textures/moon.jpg",t),e}function ne(t){const e=new O("light",new i(1,-2,1),t);return e.position=new i(-10,10,-10),e.intensity=.7,e.diffuse=new g(1,.8,.2),e.specular=new g(.9,.9,1),e}function oe(t,e){const n=new G(1024,e);n.useExponentialShadowMap=!0;const o=["box","sphere","torus","cylinder"];for(const a of o){const r=t.getMeshByName(a);r&&n.addShadowCaster(r)}}function re(t){let e=w.CreateSphere("sphere",{diameter:2,segments:32},t);return e.position.y=1,P(e,"saturnMat","./textures/saturn.jpg",t),e}function ae(t){let e=w.CreateTorus("torus",{diameter:2.5,thickness:.3},t);return e.position.y=1,P(e,"saturnMat","./textures/saturn.jpg",t),e}function se(t){let e=w.CreateGround("ground",{width:12,height:12},t);return P(e,"grassMat","./textures/grass.jpg",t),e}function ie(t){let e=w.CreateCylinder("cylinder",{diameter:2,height:2},t);return e.position=new i(-3,1,0),P(e,"radioactiveMat","./textures/radioactive.jpg",t),e}function ce(t){let e=5*Math.PI/4,n=Math.PI/3,o=12,a=new i(0,0,0),r=new I("camera1",e,n,o,a,t);return r.attachControl(!0),r}function ue(t){let e={scene:new E(t)};return e.box=te(e.scene),e.light=ne(e.scene),e.sphere=re(e.scene),e.ground=se(e.scene),e.camera=ce(e.scene),e.torus=ae(e.scene),e.cylinder=ie(e.scene),e.scene.registerBeforeRender(()=>{e.sphere&&(e.sphere.rotation.y+=.01),e.torus&&(e.torus.rotation.y-=.01)}),oe(e.scene,e.light),e}function le(t){let e=5*Math.PI/4,n=Math.PI/4,o=50,a=new i(0,20,0);const r=new I("camera1",e,n,o,a,t);return r.attachControl(!0),r.lowerBetaLimit=.1,r.upperBetaLimit=Math.PI/2.2,r.lowerRadiusLimit=15,r.upperRadiusLimit=100,r}function de(t,e,n,o){const a=new x(e,o);a.diffuseTexture=new M(n,o),t.material=a}function he(t){const e=new z("ambientLight",new i(0,1,0),t);e.intensity=.1,e.diffuse=new g(.6,.7,1),e.groundColor=new g(.2,.2,.3),e.specular=new g(.5,.5,.6);const n=new O("light",new i(1,-2,1),t);return n.position=new i(-10,100,-10),n.intensity=.7,n.diffuse=new g(.6,.7,1),n.specular=new g(.8,.9,1),n}function me(t,e){const n=new G(2048,e);n.useExponentialShadowMap=!1,n.useBlurExponentialShadowMap=!0,n.blurKernel=16,t.meshes.forEach(a=>{a.name.includes("rockCluster")&&n.addShadowCaster(a)});const o=t.getMeshByName("ground");o&&(o.receiveShadows=!0)}function ge(t){let e=w.CreateGroundFromHeightMap("ground","./textures/heightMap.png",{width:512,height:512,subdivisions:512,minHeight:0,maxHeight:20},t);return de(e,"moonMat","./textures/moon.jpg",t),e}function pe(t){function e(u){const d=[1,2,3,4,8],l=d[Math.floor(Math.random()*d.length)];let h=w.CreatePolyhedron("spacerock",{type:l,size:1.5},u);h.position=new i(0,0,0);const f=new x("rockMat",u);return f.diffuseTexture=new M("./textures/spacedebris.png",u),f.bumpTexture=new M("./textures/spacedebris_n.png",u),f.bumpTexture.level=1.25,console.log("Bump Level is:  ",f.bumpTexture.level),h.material=f,h.setEnabled(!1),h}function n(u,d,l){const h=e(u);h.setEnabled(!1);const f=[];for(let C=0;C<d;C++){const y=h.clone(`rockClone_${C}`);y&&(y.setEnabled(!0),y.position=l.add(new i((Math.random()-.5)*10,(Math.random()-.5)*5,(Math.random()-.5)*10)),y.scaling=new i(.6+Math.random()*.8,.6+Math.random()*.8,.6+Math.random()*.8),y.rotation=new i(Math.random()*Math.PI,Math.random()*Math.PI,Math.random()*Math.PI),f.push(y))}const m=N.MergeMeshes(f,!0,!0,void 0,!1,!0);if(m){m.name="rockCluster";const C=.3+Math.random()*.5,y=.2+Math.random()*.2,F=m.position.y,R=Math.random()*Math.PI*2;return u.registerBeforeRender(()=>{const b=performance.now()*.001;m.position.y=F+Math.sin(b*y+R)*C}),m}else return console.warn("Failed to merge rock cluster."),h}function o(u,d,l){for(let h=0;h<d;h++){const f=(Math.random()-.5)*l,m=(Math.random()-.5)*l,C=15+Math.random()*3;n(u,5+Math.floor(Math.random()*6),new i(f,C,m))}}function a(u){const d=w.CreateBox("skybox",{size:5e3},u),l=new x("skyboxMat",u);l.backFaceCulling=!1;const h=new A("./textures/skybox/skybox",u);return l.reflectionTexture=h,l.reflectionTexture.coordinatesMode=M.SKYBOX_MODE,l.disableLighting=!0,d.material=l,console.log("Skybox created:",d),console.log("Skybox material:",d.material),d}let r={scene:new E(t)};r.skybox=a(r.scene),r.light=he(r.scene),r.ground=ge(r.scene),r.camera=le(r.scene),r.spacerock=e(r.scene),o(r.scene,60,500);const s=e(r.scene);s.position=new i(0,20,0);const c=e(r.scene);c.position=new i(0,15,0);const p=e(r.scene);return p.position=new i(0,25,0),s.setEnabled(!0),c.setEnabled(!0),p.setEnabled(!0),me(r.scene,r.light),r}function fe(t){const e=new I("camera1",5*Math.PI/4,Math.PI/4,50,new i(0,5,0),t);return e.attachControl(!0),e.lowerBetaLimit=.1,e.upperBetaLimit=Math.PI/2.2,e.lowerRadiusLimit=15,e.upperRadiusLimit=100,e}function we(t,e,n,o){const a=new x(e,o);a.diffuseTexture=new M(n,o),t.material=a}function Me(t){const e=new z("ambientLight",new i(0,1,0),t);e.intensity=.1,e.diffuse=new g(.6,.7,1),e.groundColor=new g(.2,.2,.3);const n=new O("light",new i(1,-2,1),t);return n.position=new i(-10,100,-10),n.intensity=.7,n.diffuse=new g(.6,.7,1),n.specular=new g(.8,.9,1),n}function xe(t,e){const n=new G(2048,e);n.useBlurExponentialShadowMap=!0,n.blurKernel=16,t.meshes.forEach(a=>{a.name.includes("rockCluster")&&n.addShadowCaster(a)});const o=t.getMeshByName("ground");o&&(o.receiveShadows=!0)}function Ce(t){const e=w.CreateGround("ground",{width:128,height:128,subdivisions:128},t);return we(e,"moonMat","textures/moon.jpg",t),e}function V(t){let e=w.CreateCylinder("coin",{diameter:2,height:.08},t);const n=new x("coinMat",t);n.diffuseColor=new g(1,1,0),e.material=n,e.rotation.x=Math.PI/2;const o=(Math.random()-.5)*50,a=(Math.random()-.5)*50;return e.position=new i(o,5,a),e}function ye(t){const e=[1,2,3,4,8],n=e[Math.floor(Math.random()*e.length)];let o=w.CreatePolyhedron("spacerock",{type:n,size:1.5},t);o.position=new i(0,0,0);const a=new x("rockMat",t);return a.diffuseTexture=new M("./textures/spacedebris.png",t),a.bumpTexture=new M("./textures/spacedebris_n.png",t),a.bumpTexture.level=1.25,console.log("Bump Level is:  ",a.bumpTexture.level),o.material=a,o.setEnabled(!1),o}function be(t,e,n){const o=ye(t);o.setEnabled(!1);const a=[];for(let s=0;s<e;s++){const c=o.clone(`rockClone_${s}`);c&&(c.setEnabled(!0),c.position=n.add(new i((Math.random()-.5)*10,(Math.random()-.5)*5,(Math.random()-.5)*10)),c.scaling=new i(.3+Math.random()*.4,.3+Math.random()*.4,.3+Math.random()*.4),c.rotation=new i(Math.random()*Math.PI,Math.random()*Math.PI,Math.random()*Math.PI),a.push(c))}const r=N.MergeMeshes(a,!0,!0,void 0,!1,!0);if(r){r.name="rockCluster";const s=.3+Math.random()*.5,c=.2+Math.random()*.2,p=r.position.y,u=Math.random()*Math.PI*2;return t.registerBeforeRender(()=>{const d=performance.now()*.001;r.position.y=p+Math.sin(d*c+u)*s}),r}else return console.warn("Failed to merge rock cluster."),o}function ve(t,e,n){for(let o=0;o<e;o++){const a=(Math.random()-.5)*n,r=(Math.random()-.5)*n,s=2+Math.random()*3;be(t,5+Math.floor(Math.random()*6),new i(a,s,r))}}function ke(t,e){t.actionManager=new T(t),t.actionManager.registerAction(new $(T.OnKeyDownTrigger,n=>{e[n.sourceEvent.key.toLowerCase()]=!0})),t.actionManager.registerAction(new $(T.OnKeyUpTrigger,n=>{e[n.sourceEvent.key.toLowerCase()]=!1}))}function Te(t,e,n,o){let r=0,s=0;if(e.w&&(s+=1),e.s&&(s-=1),e.a&&(r-=1),e.d&&(r+=1),r!==0||s!==0){const p=new i(r,0,s).normalize();t.rotation.y=Math.atan2(p.x,p.z);const u=new i(Math.sin(t.rotation.y),0,Math.cos(t.rotation.y));t.position.addInPlace(u.scale(.4)),o!=null&&o.isPlaying||(n==null||n.stop(),o==null||o.start(!0))}else o!=null&&o.isPlaying&&(o.stop(),n==null||n.start(!0))}function Se(t){const e=new E(t),n=fe(e),o=Me(e),a=Ce(e);xe(e,o);const r={};Y.ImportMesh("","./models/","alien.glb",e,(c,p,u,d)=>{const l=new X("playerRoot",e);c.forEach(m=>m.parent=l),l.scaling=new i(.05,.05,.05),l.rotation=new i(Math.PI/2,0,0);const h=d.find(m=>m.name.toLowerCase().includes("idle")),f=d.find(m=>m.name.toLowerCase().includes("walk"));h==null||h.start(!0),ke(e,r),e.onBeforeRenderObservable.add(()=>{Te(l,r,h,f),s.rotation.z+=.07,s&&l&&l.getChildMeshes().some(m=>m.intersectsMesh(s,!1))&&(s.dispose(),console.log("Coin collected!"),s=V(e))})}),ve(e,20,128);let s=V(e);return{scene:e,camera:n,light:o,ground:a}}function Le(t){const e=new I("camera1",4.75,1,50,new i(0,5,0),t);return e.attachControl(!0),e.lowerBetaLimit=.1,e.upperBetaLimit=Math.PI/2.2,e.lowerRadiusLimit=15,e.upperRadiusLimit=100,e}function Ee(t,e,n,o){const a=new x(e,o);a.diffuseTexture=new M(n,o),t.material=a}function Ie(t){const e=new z("ambientLight",new i(0,1,0),t);e.intensity=.1,e.diffuse=new g(.6,.7,1),e.groundColor=new g(.2,.2,.3);const n=new O("light",new i(1,-2,1),t);return n.position=new i(-10,100,-10),n.intensity=.7,n.diffuse=new g(.6,.7,1),n.specular=new g(.8,.9,1),n}function Pe(t,e){const n=new G(2048,e);n.useBlurExponentialShadowMap=!0,n.blurKernel=16,t.meshes.forEach(a=>{a.name.includes("rockCluster")&&n.addShadowCaster(a)});const o=t.getMeshByName("ground");o&&(o.receiveShadows=!0)}function Re(t){const e=w.CreateGroundFromHeightMap("ground","./textures/heightMap.png",{width:128,height:128,subdivisions:128,minHeight:0,maxHeight:5},t);return Ee(e,"moonMat","textures/moon.jpg",t),e}function W(t){let e=w.CreateCylinder("coin",{diameter:2,height:.08},t);const n=new x("coinMat",t);n.diffuseColor=new g(1,1,0),e.material=n;const o=(Math.random()-.5)*50,a=Math.random()*25-5;return e.position=new i(o,5,a),e.rotation.x=Math.PI/2,e}function Be(t){const e=[1,2,3,4,8],n=e[Math.floor(Math.random()*e.length)];let o=w.CreatePolyhedron("spacerock",{type:n,size:1.5},t);o.position=new i(0,0,0);const a=new x("rockMat",t);return a.diffuseTexture=new M("./textures/spacedebris.png",t),a.bumpTexture=new M("./textures/spacedebris_n.png",t),a.bumpTexture.level=1.25,console.log("Bump Level is:  ",a.bumpTexture.level),o.material=a,o.setEnabled(!1),o}function _e(t,e,n){const o=Be(t);o.setEnabled(!1);const a=[];for(let s=0;s<e;s++){const c=o.clone(`rockClone_${s}`);c&&(c.setEnabled(!0),c.position=n.add(new i((Math.random()-.5)*10,(Math.random()-.5)*5,(Math.random()-.5)*10)),c.scaling=new i(.3+Math.random()*.4,.3+Math.random()*.4,.3+Math.random()*.4),c.rotation=new i(Math.random()*Math.PI,Math.random()*Math.PI,Math.random()*Math.PI),a.push(c))}const r=N.MergeMeshes(a,!0,!0,void 0,!1,!0);if(r){r.name="rockCluster";const s=.3+Math.random()*.5,c=.2+Math.random()*.2,p=r.position.y,u=Math.random()*Math.PI*2;return t.registerBeforeRender(()=>{const d=performance.now()*.001;r.position.y=p+Math.sin(d*c+u)*s}),r}else return console.warn("Failed to merge rock cluster."),o}function $e(t,e,n){for(let o=0;o<e;o++){const a=(Math.random()-.5)*n,r=(Math.random()-.5)*n,s=2+Math.random()*3;_e(t,5+Math.floor(Math.random()*6),new i(a,s,r))}}function Oe(t){const e=w.CreateBox("skybox",{size:5e3},t),n=new x("skyboxMat",t);n.backFaceCulling=!1;const o=new A("./textures/skybox/skybox",t);return n.reflectionTexture=o,n.reflectionTexture.coordinatesMode=M.SKYBOX_MODE,n.disableLighting=!0,e.material=n,console.log("Skybox created:",e),console.log("Skybox material:",e.material),e}function Ge(t,e){t.actionManager=new T(t),t.actionManager.registerAction(new $(T.OnKeyDownTrigger,n=>{e[n.sourceEvent.key.toLowerCase()]=!0})),t.actionManager.registerAction(new $(T.OnKeyUpTrigger,n=>{e[n.sourceEvent.key.toLowerCase()]=!1}))}function ze(t,e,n,o){let r=0,s=0;if(e.w&&(s+=1),e.s&&(s-=1),e.a&&(r-=1),e.d&&(r+=1),r!==0||s!==0){const p=new i(r,0,s).normalize();t.rotation.y=Math.atan2(p.x,p.z);const u=new i(Math.sin(t.rotation.y),0,Math.cos(t.rotation.y));t.position.addInPlace(u.scale(.4)),o!=null&&o.isPlaying||(n==null||n.stop(),o==null||o.start(!0))}else o!=null&&o.isPlaying&&(o.stop(),n==null||n.start(!0))}function Ne(t,e,n,o){return e&&t.getChildMeshes().some(a=>a.intersectsMesh(e,!1))&&(console.log("PING!"),o.play(),e.dispose(),e=W(n)),e}function He(t,e){const n=Z.CreateFullscreenUI("UI"),o=new Q("volumeToggle","./ui/vol_unmute.png");o.width="60px",o.height="60px",o.horizontalAlignment=j.HORIZONTAL_ALIGNMENT_RIGHT,o.verticalAlignment=j.VERTICAL_ALIGNMENT_TOP,o.top="800px",o.left="0px",o.paddingRight="10px";let a=!0;return o.source="ui/vol_mute.png",o.onPointerUpObservable.add(()=>{a=!a,o.source=a?"./ui/vol_mute.png":"./ui/vol_unmute.png",console.log(a?"Muted":"Unmuted"),t.setVolume(a?0:.5),e.setVolume(a?0:.25)}),n.addControl(o),o}function Ue(t){var e,n,o,a,r;const s=new E(t),c=Le(s);t.getRenderingCanvas();const p=Ie(s),u=Re(s);Oe(s);let d=W(s);console.log("AudioEngine present? →",v.audioEngine!==void 0),console.log("Can use Web Audio? →",(e=v.audioEngine)===null||e===void 0?void 0:e.canUseWebAudio),console.log("AudioContext state →",(o=(n=v.audioEngine)===null||n===void 0?void 0:n.audioContext)===null||o===void 0?void 0:o.state),console.log("AudioEngine.unlocked →",(a=v.audioEngine)===null||a===void 0?void 0:a.unlocked),v.audioEngine.unlock(),console.log("Attempt 2: AudioEngine.unlocked →",(r=v.audioEngine)===null||r===void 0?void 0:r.unlocked),Pe(s,p);let l=new K("coin","./audio/coin.wav",s,()=>console.log("Coin sound loaded successfully."),{autoplay:!1,loop:!1,volume:0}),h=new K("ambience","./audio/spaceambience.mp3",s,()=>console.log("music loaded successfully."),{autoplay:!0,loop:!1,volume:0});const f={};let m=He(h,l);return Y.ImportMesh("","./models/","alien.glb",s,(C,y,F,R)=>{const b=new X("playerRoot",s);C.forEach(S=>S.parent=b),b.position=new i(0,3,0),b.scaling=new i(.05,.05,.05),b.rotation=new i(Math.PI/2,0,0);const B=R.find(S=>S.name.toLowerCase().includes("idle")),J=R.find(S=>S.name.toLowerCase().includes("walk"));B==null||B.start(!0),Ge(s,f),s.onBeforeRenderObservable.add(()=>{ze(b,f,B,J),d=Ne(b,d,s,l),d.rotation.z+=.07})}),$e(s,20,128),{scene:s,camera:c,light:p,ground:u,coinSound:l,ambientSound:h,volumeToggle:m}}let H,L,k=[];function De(t){L=t,k[0]=ue(L),k[1]=pe(L),k[2]=Se(L),k[3]=Ue(L),H=k[0].scene}function Fe(t){H=k[t].scene}function _(t,e,n,o,a){const r=ee.CreateSimpleButton(t,t);return r.left=n,r.top=o,r.width="80px",r.height="30px",r.color="white",r.cornerRadius=20,r.background="green",r.onPointerUpObservable.add(()=>{Fe(e)}),a.addControl(r),r}function Ke(t){const e=new E(t);new I("guiCam",0,.8,100,i.Zero(),e);const n=Z.CreateFullscreenUI("GUI",!0);return _("Scene 1",0,"-150px","120px",n),_("Scene 2",1,"-50px","120px",n),_("Scene 3",2,"50px","120px",n),_("Scene 4",3,"150px","120px",n),e}const U=document.createElement("canvas");U.id="renderCanvas";document.body.appendChild(U);const D=new v(U,!0,{audioEngine:!0},!0);De(D);const q=Ke(D);q.autoClear=!1;D.runRenderLoop(()=>{H.render(),q.render()});
