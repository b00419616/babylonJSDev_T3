import{S,M as f,V as i,D as G,C as g,A as I,a as N,b as x,T as M,c as z,H as F,d as U,e as X,f as Z,g as T,h as $,E as v,i as V,F as ee}from"./nativeXRFrame-DPN6AMi4.js";import"./ExtrasAsMetadata-9Zg9i92i.js";import{A,I as te,C as O,B as W}from"./mrdlInnerquadMaterial-Bmy61CzM.js";/* empty css              */function R(t,e,n,o){const r=new x(e,o);r.diffuseTexture=new M(n,o),t.material=r}function ne(t){let e=f.CreateBox("box",{size:1},t);return e.scaling=new i(2,2,2),e.position=new i(3,1,0),R(e,"moonMat","textures/moon.jpg",t),e}function oe(t){const e=new G("light",new i(1,-2,1),t);return e.position=new i(-10,10,-10),e.intensity=.7,e.diffuse=new g(1,.8,.2),e.specular=new g(.9,.9,1),e}function re(t,e){const n=new N(1024,e);n.useExponentialShadowMap=!0;const o=["box","sphere","torus","cylinder"];for(const r of o){const a=t.getMeshByName(r);a&&n.addShadowCaster(a)}}function ae(t){let e=f.CreateSphere("sphere",{diameter:2,segments:32},t);return e.position.y=1,R(e,"saturnMat","textures/saturn.jpg",t),e}function se(t){let e=f.CreateTorus("torus",{diameter:2.5,thickness:.3},t);return e.position.y=1,R(e,"saturnMat","textures/saturn.jpg",t),e}function ie(t){let e=f.CreateGround("ground",{width:12,height:12},t);return R(e,"grassMat","textures/grass.jpg",t),e}function ce(t){let e=f.CreateCylinder("cylinder",{diameter:2,height:2},t);return e.position=new i(-3,1,0),R(e,"radioactiveMat","textures/radioactive.jpg",t),e}function ue(t){let e=5*Math.PI/4,n=Math.PI/3,o=12,r=new i(0,0,0),a=new I("camera1",e,n,o,r,t);return a.attachControl(!0),a}function le(t){let e={scene:new S(t)};return e.box=ne(e.scene),e.light=oe(e.scene),e.sphere=ae(e.scene),e.ground=ie(e.scene),e.camera=ue(e.scene),e.torus=se(e.scene),e.cylinder=ce(e.scene),e.scene.registerBeforeRender(()=>{e.sphere&&(e.sphere.rotation.y+=.01),e.torus&&(e.torus.rotation.y-=.01)}),re(e.scene,e.light),e}function de(t){let e=5*Math.PI/4,n=Math.PI/4,o=50,r=new i(0,20,0);const a=new I("camera1",e,n,o,r,t);return a.attachControl(!0),a.lowerBetaLimit=.1,a.upperBetaLimit=Math.PI/2.2,a.lowerRadiusLimit=15,a.upperRadiusLimit=100,a}function he(t,e,n,o){const r=new x(e,o);r.diffuseTexture=new M(n,o),t.material=r}function me(t){const e=new F("ambientLight",new i(0,1,0),t);e.intensity=.1,e.diffuse=new g(.6,.7,1),e.groundColor=new g(.2,.2,.3),e.specular=new g(.5,.5,.6);const n=new G("light",new i(1,-2,1),t);return n.position=new i(-10,100,-10),n.intensity=.7,n.diffuse=new g(.6,.7,1),n.specular=new g(.8,.9,1),n}function ge(t,e){const n=new N(2048,e);n.useExponentialShadowMap=!1,n.useBlurExponentialShadowMap=!0,n.blurKernel=16,t.meshes.forEach(r=>{r.name.includes("rockCluster")&&n.addShadowCaster(r)});const o=t.getMeshByName("ground");o&&(o.receiveShadows=!0)}function pe(t){let e=f.CreateGroundFromHeightMap("ground","textures/heightMap.png",{width:512,height:512,subdivisions:512,minHeight:0,maxHeight:20},t);return he(e,"moonMat","textures/moon.jpg",t),e}function fe(t){function e(u){const d=[1,2,3,4,8],l=d[Math.floor(Math.random()*d.length)];let h=f.CreatePolyhedron("spacerock",{type:l,size:1.5},u);h.position=new i(0,0,0);const w=new x("rockMat",u);return w.diffuseTexture=new M("/textures/spacedebris.png",u),w.bumpTexture=new M("/textures/spacedebris_n.png",u),w.bumpTexture.level=1.25,console.log("Bump Level is:  ",w.bumpTexture.level),h.material=w,h.setEnabled(!1),h}function n(u,d,l){const h=e(u);h.setEnabled(!1);const w=[];for(let C=0;C<d;C++){const b=h.clone(`rockClone_${C}`);b&&(b.setEnabled(!0),b.position=l.add(new i((Math.random()-.5)*10,(Math.random()-.5)*5,(Math.random()-.5)*10)),b.scaling=new i(.6+Math.random()*.8,.6+Math.random()*.8,.6+Math.random()*.8),b.rotation=new i(Math.random()*Math.PI,Math.random()*Math.PI,Math.random()*Math.PI),w.push(b))}const m=U.MergeMeshes(w,!0,!0,void 0,!1,!0);if(m){m.name="rockCluster";const C=.3+Math.random()*.5,b=.2+Math.random()*.2,j=m.position.y,B=Math.random()*Math.PI*2;return u.registerBeforeRender(()=>{const y=performance.now()*.001;m.position.y=j+Math.sin(y*b+B)*C}),m}else return console.warn("Failed to merge rock cluster."),h}function o(u,d,l){for(let h=0;h<d;h++){const w=(Math.random()-.5)*l,m=(Math.random()-.5)*l,C=15+Math.random()*3;n(u,5+Math.floor(Math.random()*6),new i(w,C,m))}}function r(u){const d=f.CreateBox("skybox",{size:5e3},u),l=new x("skyboxMat",u);l.backFaceCulling=!1;const h=new z("/textures/skybox/skybox",u);return l.reflectionTexture=h,l.reflectionTexture.coordinatesMode=M.SKYBOX_MODE,l.disableLighting=!0,d.material=l,console.log("Skybox created:",d),console.log("Skybox material:",d.material),d}let a={scene:new S(t)};a.skybox=r(a.scene),a.light=me(a.scene),a.ground=pe(a.scene),a.camera=de(a.scene),a.spacerock=e(a.scene),o(a.scene,60,500);const s=e(a.scene);s.position=new i(0,20,0);const c=e(a.scene);c.position=new i(0,15,0);const p=e(a.scene);return p.position=new i(0,25,0),s.setEnabled(!0),c.setEnabled(!0),p.setEnabled(!0),ge(a.scene,a.light),a}function we(t){const e=new I("camera1",5*Math.PI/4,Math.PI/4,50,new i(0,5,0),t);return e.attachControl(!0),e.lowerBetaLimit=.1,e.upperBetaLimit=Math.PI/2.2,e.lowerRadiusLimit=15,e.upperRadiusLimit=100,e}function Me(t,e,n,o){const r=new x(e,o);r.diffuseTexture=new M(n,o),t.material=r}function xe(t){const e=new F("ambientLight",new i(0,1,0),t);e.intensity=.1,e.diffuse=new g(.6,.7,1),e.groundColor=new g(.2,.2,.3);const n=new G("light",new i(1,-2,1),t);return n.position=new i(-10,100,-10),n.intensity=.7,n.diffuse=new g(.6,.7,1),n.specular=new g(.8,.9,1),n}function Ce(t,e){const n=new N(2048,e);n.useBlurExponentialShadowMap=!0,n.blurKernel=16,t.meshes.forEach(r=>{r.name.includes("rockCluster")&&n.addShadowCaster(r)});const o=t.getMeshByName("ground");o&&(o.receiveShadows=!0)}function be(t){const e=f.CreateGround("ground",{width:128,height:128,subdivisions:128},t);return Me(e,"moonMat","textures/moon.jpg",t),e}function Y(t){let e=f.CreateCylinder("coin",{diameter:2,height:.08},t);const n=new x("coinMat",t);n.diffuseColor=new g(1,1,0),e.material=n,e.rotation.x=Math.PI/2;const o=(Math.random()-.5)*50,r=(Math.random()-.5)*50;return e.position=new i(o,5,r),e}function ye(t){const e=[1,2,3,4,8],n=e[Math.floor(Math.random()*e.length)];let o=f.CreatePolyhedron("spacerock",{type:n,size:1.5},t);o.position=new i(0,0,0);const r=new x("rockMat",t);return r.diffuseTexture=new M("/textures/spacedebris.png",t),r.bumpTexture=new M("/textures/spacedebris_n.png",t),r.bumpTexture.level=1.25,console.log("Bump Level is:  ",r.bumpTexture.level),o.material=r,o.setEnabled(!1),o}function ve(t,e,n){const o=ye(t);o.setEnabled(!1);const r=[];for(let s=0;s<e;s++){const c=o.clone(`rockClone_${s}`);c&&(c.setEnabled(!0),c.position=n.add(new i((Math.random()-.5)*10,(Math.random()-.5)*5,(Math.random()-.5)*10)),c.scaling=new i(.3+Math.random()*.4,.3+Math.random()*.4,.3+Math.random()*.4),c.rotation=new i(Math.random()*Math.PI,Math.random()*Math.PI,Math.random()*Math.PI),r.push(c))}const a=U.MergeMeshes(r,!0,!0,void 0,!1,!0);if(a){a.name="rockCluster";const s=.3+Math.random()*.5,c=.2+Math.random()*.2,p=a.position.y,u=Math.random()*Math.PI*2;return t.registerBeforeRender(()=>{const d=performance.now()*.001;a.position.y=p+Math.sin(d*c+u)*s}),a}else return console.warn("Failed to merge rock cluster."),o}function ke(t,e,n){for(let o=0;o<e;o++){const r=(Math.random()-.5)*n,a=(Math.random()-.5)*n,s=2+Math.random()*3;ve(t,5+Math.floor(Math.random()*6),new i(r,s,a))}}function Te(t,e){t.actionManager=new T(t),t.actionManager.registerAction(new $(T.OnKeyDownTrigger,n=>{e[n.sourceEvent.key.toLowerCase()]=!0})),t.actionManager.registerAction(new $(T.OnKeyUpTrigger,n=>{e[n.sourceEvent.key.toLowerCase()]=!1}))}function Se(t,e,n,o){let a=0,s=0;if(e.w&&(s+=1),e.s&&(s-=1),e.a&&(a-=1),e.d&&(a+=1),a!==0||s!==0){const p=new i(a,0,s).normalize();t.rotation.y=Math.atan2(p.x,p.z);const u=new i(Math.sin(t.rotation.y),0,Math.cos(t.rotation.y));t.position.addInPlace(u.scale(.4)),o!=null&&o.isPlaying||(n==null||n.stop(),o==null||o.start(!0))}else o!=null&&o.isPlaying&&(o.stop(),n==null||n.start(!0))}function Ee(t){const e=new S(t),n=we(e),o=xe(e),r=be(e);Ce(e,o);const a={};X.ImportMesh("","/models/","alien.glb",e,(c,p,u,d)=>{const l=new Z("playerRoot",e);c.forEach(m=>m.parent=l),l.scaling=new i(.05,.05,.05),l.rotation=new i(Math.PI/2,0,0);const h=d.find(m=>m.name.toLowerCase().includes("idle")),w=d.find(m=>m.name.toLowerCase().includes("walk"));h==null||h.start(!0),Te(e,a),e.onBeforeRenderObservable.add(()=>{Se(l,a,h,w),s.rotation.z+=.07,s&&l&&l.getChildMeshes().some(m=>m.intersectsMesh(s,!1))&&(s.dispose(),console.log("Coin collected!"),s=Y(e))})}),ke(e,20,128);let s=Y(e);return{scene:e,camera:n,light:o,ground:r}}function Le(t){const e=new I("camera1",4.75,1,50,new i(0,5,0),t);return e.attachControl(!0),e.lowerBetaLimit=.1,e.upperBetaLimit=Math.PI/2.2,e.lowerRadiusLimit=15,e.upperRadiusLimit=100,e}function Ie(t,e,n,o){const r=new x(e,o);r.diffuseTexture=new M(n,o),t.material=r}function Re(t){const e=new F("ambientLight",new i(0,1,0),t);e.intensity=.1,e.diffuse=new g(.6,.7,1),e.groundColor=new g(.2,.2,.3);const n=new G("light",new i(1,-2,1),t);return n.position=new i(-10,100,-10),n.intensity=.7,n.diffuse=new g(.6,.7,1),n.specular=new g(.8,.9,1),n}function Be(t,e){const n=new N(2048,e);n.useBlurExponentialShadowMap=!0,n.blurKernel=16,t.meshes.forEach(r=>{r.name.includes("rockCluster")&&n.addShadowCaster(r)});const o=t.getMeshByName("ground");o&&(o.receiveShadows=!0)}function Pe(t){const e=f.CreateGroundFromHeightMap("ground","textures/heightMap.png",{width:128,height:128,subdivisions:128,minHeight:0,maxHeight:5},t);return Ie(e,"moonMat","textures/moon.jpg",t),e}function q(t){let e=f.CreateCylinder("coin",{diameter:2,height:.08},t);const n=new x("coinMat",t);n.diffuseColor=new g(1,1,0),e.material=n;const o=(Math.random()-.5)*50,r=Math.random()*25-5;return e.position=new i(o,5,r),e.rotation.x=Math.PI/2,e}function _e(t){const e=[1,2,3,4,8],n=e[Math.floor(Math.random()*e.length)];let o=f.CreatePolyhedron("spacerock",{type:n,size:1.5},t);o.position=new i(0,0,0);const r=new x("rockMat",t);return r.diffuseTexture=new M("/textures/spacedebris.png",t),r.bumpTexture=new M("/textures/spacedebris_n.png",t),r.bumpTexture.level=1.25,console.log("Bump Level is:  ",r.bumpTexture.level),o.material=r,o.setEnabled(!1),o}function $e(t,e,n){const o=_e(t);o.setEnabled(!1);const r=[];for(let s=0;s<e;s++){const c=o.clone(`rockClone_${s}`);c&&(c.setEnabled(!0),c.position=n.add(new i((Math.random()-.5)*10,(Math.random()-.5)*5,(Math.random()-.5)*10)),c.scaling=new i(.3+Math.random()*.4,.3+Math.random()*.4,.3+Math.random()*.4),c.rotation=new i(Math.random()*Math.PI,Math.random()*Math.PI,Math.random()*Math.PI),r.push(c))}const a=U.MergeMeshes(r,!0,!0,void 0,!1,!0);if(a){a.name="rockCluster";const s=.3+Math.random()*.5,c=.2+Math.random()*.2,p=a.position.y,u=Math.random()*Math.PI*2;return t.registerBeforeRender(()=>{const d=performance.now()*.001;a.position.y=p+Math.sin(d*c+u)*s}),a}else return console.warn("Failed to merge rock cluster."),o}function Oe(t,e,n){for(let o=0;o<e;o++){const r=(Math.random()-.5)*n,a=(Math.random()-.5)*n,s=2+Math.random()*3;$e(t,5+Math.floor(Math.random()*6),new i(r,s,a))}}function Ge(t){const e=f.CreateBox("skybox",{size:5e3},t),n=new x("skyboxMat",t);n.backFaceCulling=!1;const o=new z("/textures/skybox/skybox",t);return n.reflectionTexture=o,n.reflectionTexture.coordinatesMode=M.SKYBOX_MODE,n.disableLighting=!0,e.material=n,console.log("Skybox created:",e),console.log("Skybox material:",e.material),e}function Ne(t,e){t.actionManager=new T(t),t.actionManager.registerAction(new $(T.OnKeyDownTrigger,n=>{e[n.sourceEvent.key.toLowerCase()]=!0})),t.actionManager.registerAction(new $(T.OnKeyUpTrigger,n=>{e[n.sourceEvent.key.toLowerCase()]=!1}))}function ze(t,e,n,o){let a=0,s=0;if(e.w&&(s+=1),e.s&&(s-=1),e.a&&(a-=1),e.d&&(a+=1),a!==0||s!==0){const p=new i(a,0,s).normalize();t.rotation.y=Math.atan2(p.x,p.z);const u=new i(Math.sin(t.rotation.y),0,Math.cos(t.rotation.y));t.position.addInPlace(u.scale(.4)),o!=null&&o.isPlaying||(n==null||n.stop(),o==null||o.start(!0))}else o!=null&&o.isPlaying&&(o.stop(),n==null||n.start(!0))}function Fe(t,e,n,o){return e&&t.getChildMeshes().some(r=>r.intersectsMesh(e,!1))&&(console.log("PING!"),o.play(),e.dispose(),e=q(n)),e}function Ue(t,e){const n=A.CreateFullscreenUI("UI"),o=new te("volumeToggle","ui/vol_unmute.png");o.width="60px",o.height="60px",o.horizontalAlignment=O.HORIZONTAL_ALIGNMENT_RIGHT,o.verticalAlignment=O.VERTICAL_ALIGNMENT_TOP,o.top="800px",o.left="0px",o.paddingRight="10px";let r=!0;return o.source="ui/vol_mute.png",o.onPointerUpObservable.add(()=>{r=!r,o.source=r?"ui/vol_mute.png":"ui/vol_unmute.png",console.log(r?"Muted":"Unmuted"),t.setVolume(r?0:.5),e.setVolume(r?0:.25)}),n.addControl(o),o}function Ae(t){var e,n,o,r,a;const s=new S(t),c=Le(s);t.getRenderingCanvas();const p=Re(s),u=Pe(s);Ge(s);let d=q(s);console.log("AudioEngine present? →",v.audioEngine!==void 0),console.log("Can use Web Audio? →",(e=v.audioEngine)===null||e===void 0?void 0:e.canUseWebAudio),console.log("AudioContext state →",(o=(n=v.audioEngine)===null||n===void 0?void 0:n.audioContext)===null||o===void 0?void 0:o.state),console.log("AudioEngine.unlocked →",(r=v.audioEngine)===null||r===void 0?void 0:r.unlocked),v.audioEngine.unlock(),console.log("Attempt 2: AudioEngine.unlocked →",(a=v.audioEngine)===null||a===void 0?void 0:a.unlocked),Be(s,p);let l=new V("coin","/audio/coin.wav",s,()=>console.log("Coin sound loaded successfully."),{autoplay:!1,loop:!1,volume:0}),h=new V("ambience","/audio/spaceambience.mp3",s,()=>console.log("music loaded successfully."),{autoplay:!0,loop:!1,volume:0});const w={};let m=Ue(h,l);return X.ImportMesh("","/models/","alien.glb",s,(C,b,j,B)=>{const y=new Z("playerRoot",s);C.forEach(E=>E.parent=y),y.position=new i(0,3,0),y.scaling=new i(.05,.05,.05),y.rotation=new i(Math.PI/2,0,0);const P=B.find(E=>E.name.toLowerCase().includes("idle")),Q=B.find(E=>E.name.toLowerCase().includes("walk"));P==null||P.start(!0),Ne(s,w),s.onBeforeRenderObservable.add(()=>{ze(y,w,P,Q),d=Fe(y,d,s,l),d.rotation.z+=.07})}),Oe(s,20,128),{scene:s,camera:c,light:p,ground:u,coinSound:l,ambientSound:h,volumeToggle:m}}function He(t){const e=A.CreateFullscreenUI("UI"),n=W.CreateSimpleButton("startBtn","Start Game");return n.width="150px",n.height="40px",n.color="red",n.background="black",n.horizontalAlignment=O.HORIZONTAL_ALIGNMENT_CENTER,n.verticalAlignment=O.VERTICAL_ALIGNMENT_CENTER,n.onPointerUpObservable.add(()=>{var o;(o=v.audioEngine)===null||o===void 0||o.unlock(),console.log("Audio unlocked via menu click"),je(t)}),e.addControl(n),n}function De(t){const e=f.CreateBox("skybox",{size:5e3},t),n=new x("skyboxMat",t);n.backFaceCulling=!1;const o=new z("/textures/skybox/skybox",t);return n.reflectionTexture=o,n.reflectionTexture.coordinatesMode=M.SKYBOX_MODE,n.disableLighting=!0,e.material=n,console.log("Skybox created:",e),console.log("Skybox material:",e.material),e}function Ke(t){const e=new ee("menuCamera",new i(0,10,-30),t);return e.setTarget(new i(0,10,0)),e.inputs.clear(),e}function je(t){const e=Ae(t);t.runRenderLoop(()=>{e.scene.render()})}function Ve(t){const e=new S(t),n=De(e),o=Ke(e),r=He(t);return{scene:e,skybox:n,camera:o,startButton:r}}let H,L,k=[];function Ye(t){L=t,k[0]=le(L),k[1]=fe(L),k[2]=Ee(L),k[3]=Ve(L),H=k[0].scene}function Xe(t){H=k[t].scene}function _(t,e,n,o,r){const a=W.CreateSimpleButton(t,t);return a.left=n,a.top=o,a.width="80px",a.height="30px",a.color="white",a.cornerRadius=20,a.background="green",a.onPointerUpObservable.add(()=>{Xe(e)}),r.addControl(a),a}function Ze(t){const e=new S(t);new I("guiCam",0,.8,100,i.Zero(),e);const n=A.CreateFullscreenUI("GUI",!0);return _("Scene 1",0,"-150px","120px",n),_("Scene 2",1,"-50px","120px",n),_("Scene 3",2,"50px","120px",n),_("Scene 4",3,"150px","120px",n),e}const D=document.createElement("canvas");D.id="renderCanvas";document.body.appendChild(D);const K=new v(D,!0,{audioEngine:!0},!0);Ye(K);const J=Ze(K);J.autoClear=!1;K.runRenderLoop(()=>{H.render(),J.render()});
